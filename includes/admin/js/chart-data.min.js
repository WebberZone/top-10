function updateChart(){jQuery.post(ajaxurl,{action:"tptn_chart_data",security:tptn_chart_data.security,from_date:jQuery("#datepicker-from").val(),to_date:jQuery("#datepicker-to").val(),network:tptn_chart_data.network},function(t){var a=[],o=[];for(var r in t)a.push(t[r].date),o.push(t[r].visits);var e="bar",n=!1,i="#70c4e1",d="#70c4e1",l=0,p="#70c4e1",c=0,s=!0;a.length>100&&(e="line",n=!0,i="rgba(112, 196, 225, 0.8)",d="#70c4e1",l=2,p="#ffffff",c=3,s=!1),window.top10chart.config.type!==e&&(window.top10chart.config.type=e,window.top10chart.data.datasets.forEach(t=>{t.fill=n,t.backgroundColor=i,t.pointBackgroundColor=d,t.borderWidth=l,t.pointBorderColor=p,t.pointRadius=c}),window.top10chart.options&&window.top10chart.options.plugins&&window.top10chart.options.plugins.datalabels&&(window.top10chart.options.plugins.datalabels.display=s)),window.top10chart.data.labels=a,window.top10chart.data.datasets.forEach(t=>{t.data=o}),window.top10chart.update()},"json")}jQuery(document).ready(function(t){t.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"tptn_chart_data",security:tptn_chart_data.security,from_date:t("#datepicker-from").val(),to_date:t("#datepicker-to").val(),network:tptn_chart_data.network},success:function(a){var o=[],r=[];for(var e in a)o.push(a[e].date),r.push(a[e].visits);var n="bar",i=!1,d="#70c4e1",l="#70c4e1",p=0,c="#70c4e1",s=0,u=!0;o.length>50&&(n="line",i=!0,d="rgba(112, 196, 225, 0.2)",l="#70c4e1",p=2,c="#ffffff",s=3,u=!1);var f=t("#visits"),h=!(!tptn_chart_data||1!==parseInt(tptn_chart_data.enableBarClick,10)),g={type:n,data:{labels:o,datasets:[{label:tptn_chart_data.datasetlabel,backgroundColor:d,borderColor:"#70c4e1",hoverBackgroundColor:"#ffbf00",hoverBorderColor:"#ffbf00",data:r,fill:i,pointBackgroundColor:l,pointBorderColor:c,pointRadius:s,borderWidth:p}]},plugins:[ChartDataLabels],options:{plugins:{title:{text:tptn_chart_data.charttitle,display:!0},legend:{display:!1,position:"bottom"},datalabels:{color:"#000000",anchor:"end",align:"top",display:u}},scales:{x:{type:"time",time:{tooltipFormat:"DD",unit:"day",displayFormats:{day:"DD"}},title:{display:!1,labelString:"Date"}},y:{grace:"5%",suggestedMin:0,display:!0,title:{display:!1,text:tptn_chart_data.datasetlabel,color:"#000",padding:{top:30,left:0,right:0,bottom:0}}}}}};h&&(g.options.onClick=function(t,a){if(a.length>0){var r=a[0].index,e=o[r],n=new Date(e),i=String(n.getDate()).padStart(2,"0")+"+"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]+"+"+n.getFullYear(),d=tptn_chart_data.statsUrl+"&orderby=daily_count&order=desc&post-date-filter-from="+i+"&post-date-filter-to="+i;window.open(d,"_blank")}},g.options.onHover=function(t,a){t.native.target.style.cursor=a.length>0?"pointer":"default"},g.options.plugins.tooltip={callbacks:{afterBody:function(){return tptn_chart_data.clickBarHint}}}),window.top10chart=new Chart(f,g)},error:function(t){}})});