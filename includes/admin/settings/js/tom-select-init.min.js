!function(t){"use strict";t(document).ready((function(){document.querySelectorAll(".ts_autocomplete").forEach((function(e){const a=e.getAttribute("data-wp-prefix")||"WZ",n=window[`${a}TomSelectSettings`]||WZTomSelectSettings,o=e.getAttribute("data-wp-action")||n.action,i=e.getAttribute("data-wp-nonce")||n.nonce,s=e.getAttribute("data-wp-endpoint")||n.endpoint,r=n.forms,c=n.tags,u=n.custom_fields,l=n.strings,d="forms"===s?r:"tags"===s?c:"custom_fields"===s?u:[];if(!d||!Array.isArray(d))return;const p=d.map((t=>({value:t.id,text:t.name}))),v=e.value.split(",").map((t=>t.trim())).filter(Boolean);if(("category"===s||"post_tag"===s||s.includes("tax"))&&v.length>0){const t=v.map((t=>{const e=t.match(/^(.*)\s+\(.*:\d+\)$/);return{value:t,text:e?e[1]:t}})),e=[...p];t.forEach((t=>{e.some((e=>e.value===t.value))||e.push(t)})),p.length=0,p.push(...e)}let g={};const m=e.getAttribute("data-ts-config");if(m)try{g=JSON.parse(m)}catch(t){}const f={...{plugins:["dropdown_input","clear_button","remove_button"],valueField:"value",labelField:"text",searchField:["text","value"],options:p,items:v,persist:!0,createOnBlur:!1,create:!1,render:{no_results:(t,e)=>`<div class="no-results">${l.no_results.replace("%s",e(t.input))}</div>`,option:(t,e)=>"category"===s||"post_tag"===s||s.includes("tax")?`<div>${e(t.value)}</div>`:`<div>${e(t.text)} (${e(t.value)})</div>`,item:(t,e)=>"category"===s||"post_tag"===s||s.includes("tax")?`<div>${e(t.value)}</div>`:`<div>${e(t.text)} (${e(t.value)})</div>`},load:function(e,a){e.length?t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:o,nonce:i,q:e,endpoint:s},error:function(){a()},success:function(t){t.success&&Array.isArray(t.data)?a(t.data):a()}}):a()}},...g};try{new TomSelect(e,f)}catch(t){}}))}))}(jQuery);